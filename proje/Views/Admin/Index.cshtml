@model proje.Models.AdminDashboardViewModel
@{
    ViewData["Title"] = "Admin Paneli";
}

<div class="container-fluid">
    <h1 class="mb-4">Admin Paneli</h1>

    @if (TempData["Success"] != null)
    {
        <div class="alert alert-success alert-dismissible fade show" role="alert">
            @TempData["Success"]
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>
    }

    @if (TempData["Error"] != null)
    {
        <div class="alert alert-danger alert-dismissible fade show" role="alert">
            @TempData["Error"]
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>
    }

    <!-- ƒ∞statistik Kartlarƒ± -->
    <div class="row mb-4">
        <div class="col-md-3 mb-3">
            <div class="card text-white admin-card-primary">
                <div class="card-body">
                    <div class="d-flex justify-content-between">
                        <div>
                            <h6 class="card-title">Toplam Spor Salonu</h6>
                            <h2 class="mb-0">@Model.TotalGyms</h2>
                            <small>Aktif: @Model.ActiveGyms</small>
                        </div>
                        <div class="align-self-center">
                            <span style="font-size: 2rem;">üè¢</span>
                        </div>
                    </div>
                </div>
                <div class="card-footer admin-card-footer">
                    <a asp-controller="Gyms" asp-action="Index" class="text-white text-decoration-none">Detaylar ‚Üí</a>
                </div>
            </div>
        </div>

        <div class="col-md-3 mb-3">
            <div class="card text-white admin-card-secondary">
                <div class="card-body">
                    <div class="d-flex justify-content-between">
                        <div>
                            <h6 class="card-title">Toplam Hizmet</h6>
                            <h2 class="mb-0">@Model.TotalServices</h2>
                        </div>
                        <div class="align-self-center">
                            <span style="font-size: 2rem;">üìã</span>
                        </div>
                    </div>
                </div>
                <div class="card-footer admin-card-footer">
                    <a asp-controller="Services" asp-action="Index" class="text-white text-decoration-none">Detaylar ‚Üí</a>
                </div>
            </div>
        </div>

        <div class="col-md-3 mb-3">
            <div class="card text-white admin-card-info">
                <div class="card-body">
                    <div class="d-flex justify-content-between">
                        <div>
                            <h6 class="card-title">Toplam Antren√∂r</h6>
                            <h2 class="mb-0">@Model.TotalTrainers</h2>
                            <small>Aktif: @Model.ActiveTrainers</small>
                        </div>
                        <div class="align-self-center">
                            <span style="font-size: 2rem;">üë®‚Äçüè´</span>
                        </div>
                    </div>
                </div>
                <div class="card-footer admin-card-footer">
                    <a asp-controller="Trainers" asp-action="Index" class="text-white text-decoration-none">Detaylar ‚Üí</a>
                </div>
            </div>
        </div>

        <div class="col-md-3 mb-3">
            <div class="card text-white admin-card-accent">
                <div class="card-body">
                    <div class="d-flex justify-content-between">
                        <div>
                            <h6 class="card-title">Toplam √úye</h6>
                            <h2 class="mb-0">@Model.TotalMembers</h2>
                            <small>Kayƒ±tlƒ± √úyeler</small>
                        </div>
                        <div class="align-self-center">
                            <span style="font-size: 2rem;">üë•</span>
                        </div>
                    </div>
                </div>
                <div class="card-footer admin-card-footer">
                    <a href="#" class="text-white text-decoration-none" onclick="alert('√úye y√∂netimi yakƒ±nda eklenecek'); return false;">Detaylar ‚Üí</a>
                </div>
            </div>
        </div>
    </div>

    <!-- Randevu ƒ∞statistikleri -->
    <div class="row mb-4">
        <div class="col-md-4 mb-3">
            <div class="card border-primary">
                <div class="card-body">
                    <h5 class="card-title text-primary">Toplam Randevu</h5>
                    <h3 class="text-primary">@Model.TotalAppointments</h3>
                </div>
            </div>
        </div>
        <div class="col-md-4 mb-3">
            <div class="card border-warning">
                <div class="card-body">
                    <h5 class="card-title text-warning">Bekleyen Randevular</h5>
                    <h3 class="text-warning">@Model.PendingAppointments</h3>
                </div>
            </div>
        </div>
        <div class="col-md-4 mb-3">
            <div class="card border-success">
                <div class="card-body">
                    <h5 class="card-title" style="color: var(--navy-light);">Onaylanan Randevular</h5>
                    <h3 style="color: var(--navy-light);">@Model.ApprovedAppointments</h3>
                </div>
            </div>
        </div>
    </div>

    <!-- Gelir ve Kullanƒ±cƒ± ƒ∞statistikleri -->
    <div class="row mb-4">
        <div class="col-md-6 mb-3">
            <div class="card admin-revenue-card">
                <div class="card-body text-white">
                    <h5 class="card-title">Toplam Gelir</h5>
                    <h2>@Model.TotalRevenue.ToString("C")</h2>
                    <small>Onaylanan ve Tamamlanan Randevular</small>
                </div>
            </div>
        </div>
        <div class="col-md-6 mb-3">
            <div class="card border-primary">
                <div class="card-body">
                    <h5 class="card-title text-primary">Toplam Kullanƒ±cƒ±</h5>
                    <h3 class="text-primary">@Model.TotalUsers</h3>
                    <small class="text-muted">Sistemdeki t√ºm kullanƒ±cƒ±lar</small>
                </div>
            </div>
        </div>
    </div>

    <!-- Hƒ±zlƒ± Eri≈üim -->
    <div class="row mb-4">
        <div class="col-12">
            <div class="card border-primary">
                <div class="card-header bg-primary text-white">
                    <h5 class="mb-0">Hƒ±zlƒ± Eri≈üim</h5>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-3 mb-2">
                            <a asp-controller="Gyms" asp-action="Create" class="btn btn-primary w-100">
                                ‚ûï Yeni Spor Salonu
                            </a>
                        </div>
                        <div class="col-md-3 mb-2">
                            <a asp-controller="Services" asp-action="Create" class="btn w-100" style="background-color: var(--navy-light); border-color: var(--navy-light); color: white;">
                                ‚ûï Yeni Hizmet
                            </a>
                        </div>
                        <div class="col-md-3 mb-2">
                            <a asp-controller="Trainers" asp-action="Create" class="btn w-100" style="background-color: var(--navy-lighter); border-color: var(--navy-lighter); color: white;">
                                ‚ûï Yeni Antren√∂r
                            </a>
                        </div>
                        <div class="col-md-3 mb-2">
                            <a asp-controller="Appointments" asp-action="Index" class="btn btn-warning w-100">
                                üìÖ Randevularƒ± Y√∂net
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Son Randevular -->
    <div class="row">
        <div class="col-12">
            <div class="card border-primary">
                <div class="card-header bg-primary text-white d-flex justify-content-between align-items-center">
                    <h5 class="mb-0">Son Randevular</h5>
                    <a asp-controller="Appointments" asp-action="Index" class="btn btn-sm btn-light">T√ºm√ºn√º G√∂r</a>
                </div>
                <div class="card-body">
                    @if (Model.RecentAppointments.Any())
                    {
                        <div class="table-responsive">
                            <table class="table table-hover">
                                <thead class="table-light">
                                    <tr>
                                        <th>√úye</th>
                                        <th>Antren√∂r</th>
                                        <th>Hizmet</th>
                                        <th>Tarih/Saat</th>
                                        <th>Durum</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    @foreach (var appointment in Model.RecentAppointments)
                                    {
                                        <tr>
                                            <td>@appointment.MemberName</td>
                                            <td>@appointment.TrainerName</td>
                                            <td>@appointment.ServiceName</td>
                                            <td>@appointment.AppointmentDate.ToString("dd.MM.yyyy HH:mm")</td>
                                            <td>
                                                @switch (appointment.Status)
                                                {
                                                    case "Pending":
                                                        <span class="badge bg-warning">Bekliyor</span>
                                                        break;
                                                    case "Approved":
                                                        <span class="badge" style="background-color: var(--navy-light);">Onaylandƒ±</span>
                                                        break;
                                                    case "Rejected":
                                                        <span class="badge bg-danger">Reddedildi</span>
                                                        break;
                                                    case "Completed":
                                                        <span class="badge" style="background-color: var(--navy-lighter);">Tamamlandƒ±</span>
                                                        break;
                                                    default:
                                                        <span class="badge bg-secondary">@appointment.Status</span>
                                                        break;
                                                }
                                            </td>
                                        </tr>
                                    }
                                </tbody>
                            </table>
                        </div>
                    }
                    else
                    {
                        <p class="text-muted">Hen√ºz randevu bulunmamaktadƒ±r.</p>
                    }
                </div>
            </div>
        </div>
    </div>

    <!-- Son Eklenen √úyeler -->
    <div class="row mt-4">
        <div class="col-12">
            <div class="card border-primary">
                <div class="card-header bg-primary text-white d-flex justify-content-between align-items-center">
                    <h5 class="mb-0">Son Eklenen √úyeler</h5>
                    <span class="badge bg-light text-primary">Toplam: @Model.TotalMembers</span>
                </div>
                <div class="card-body">
                    @if (Model.RecentMembers.Any())
                    {
                        <div class="table-responsive">
                            <table class="table table-hover">
                                <thead class="table-light">
                                    <tr>
                                        <th>Ad Soyad</th>
                                        <th>E-posta</th>
                                        <th>Kayƒ±t Tarihi</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    @foreach (var member in Model.RecentMembers)
                                    {
                                        <tr>
                                            <td>@member.FullName</td>
                                            <td>@member.Email</td>
                                            <td>@member.CreatedDate.ToString("dd.MM.yyyy HH:mm")</td>
                                        </tr>
                                    }
                                </tbody>
                            </table>
                        </div>
                    }
                    else
                    {
                        <p class="text-muted">Hen√ºz √ºye bulunmamaktadƒ±r.</p>
                    }
                </div>
            </div>
        </div>
    </div>
</div>

<style>
    /* Admin Panel Lacivert Tema Stilleri */
    .admin-card-primary {
        background: linear-gradient(135deg, var(--navy-primary) 0%, var(--navy-secondary) 100%);
        border: none;
    }
    
    .admin-card-secondary {
        background: linear-gradient(135deg, var(--navy-secondary) 0%, var(--navy-light) 100%);
        border: none;
    }
    
    .admin-card-info {
        background: linear-gradient(135deg, var(--navy-light) 0%, var(--navy-lighter) 100%);
        border: none;
    }
    
    .admin-card-accent {
        background: linear-gradient(135deg, #3b82f6 0%, #60a5fa 100%);
        border: none;
    }
    
    .admin-card-footer {
        background-color: rgba(0, 0, 0, 0.2);
        border-top: 1px solid rgba(255, 255, 255, 0.1);
    }
    
    .admin-revenue-card {
        background: linear-gradient(135deg, var(--navy-primary) 0%, var(--navy-light) 100%);
        border: none;
    }
    
    .card {
        transition: transform 0.2s, box-shadow 0.2s;
        border: 1px solid rgba(30, 58, 138, 0.1);
    }
    
    .card:hover {
        transform: translateY(-5px);
        box-shadow: 0 8px 16px rgba(30, 58, 138, 0.2);
    }
    
    .card-header {
        border-bottom: 2px solid rgba(30, 58, 138, 0.1);
    }
    
    .table thead th {
        color: var(--navy-primary);
        font-weight: 600;
    }
    
    .table-hover tbody tr:hover {
        background-color: rgba(30, 58, 138, 0.05);
    }
</style>
